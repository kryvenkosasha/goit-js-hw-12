{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst refs = {\n  searchForm: document.querySelector('form'),\n  searchInput: document.querySelector('input'),\n  searchButton: document.querySelector('.search'),\n  gallery: document.querySelector('.images'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nlet userValue;\nlet page = 1;\nlet maxPage;\n\nhideLoader();\nhideLoadMoreBtn();\n\nconst lightbox = new SimpleLightbox('.images a');\n\nrefs.loadMore.addEventListener('click', async e => {\n  e.preventDefault();\n  page += 1;\n  showLoader();\n  const data = await searchImages(userValue, page);\n  renderImages(data);\n  hideLoader();\n  lightbox.refresh();\n\n  let elem = document.querySelector('li');\n  let rect = elem.getBoundingClientRect();\n  window.scrollBy({\n    top: rect.height * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n  // console.log(rect);\n  chekBtnVisibleStatus();\n});\n\nrefs.gallery.addEventListener('click', e => {\n  if (e.target === e.currentTarget) return;\n  e.preventDefault();\n});\n\nrefs.searchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  userValue = e.target.elements.input.value;\n  page = 1;\n  if (userValue === '') return;\n\n  showLoader();\n\n  try {\n    const data = await searchImages(userValue, page);\n    refs.gallery.innerHTML = '';\n    renderImages(data);\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  refs.loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nasync function searchImages(userValue, page) {\n  try {\n    const BASE_URL = `https://pixabay.com/api/?key=42312276-5bc23f4af127c6565aecd0d27&q=${userValue}`;\n\n    const options = {\n      q: `${userValue}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    };\n\n    const res = await axios.get(BASE_URL, { params: options });\n    maxPage = Math.ceil(res.data.totalHits / 15);\n    chekBtnVisibleStatus();\n    return res.data;\n  } catch (err) {\n    iziToast.show({\n      message: 'Сталася помилка',\n      color: 'red',\n    });\n    console.error(err);\n  }\n}\n\nfunction createMarcup(images) {\n  if (images.hits.length === 0) {\n    iziToast.show({\n      message: 'За запитом нічого не знайдено',\n      color: 'red',\n    });\n    return;\n  }\n  const markup = images.hits\n    .map(image => {\n      return `<li><a href=${image.largeImageURL} ><img src=${image.webformatURL}></a>\n  <p>Tags: ${image.tags} </p>\n  <p>Likes: ${image.likes} </p>\n  <p>Views: ${image.views} </p>\n  <p>Comments: ${image.comments} </p>\n  <p>Downloads: ${image.downloads} </p>\n  </li>`;\n    })\n    .join('\\n');\n  return markup;\n}\n\nfunction renderImages(data) {\n  if (data.hits.length === 0) {\n    iziToast.show({\n      message: 'За запитом нічого не знайдено',\n      color: 'red',\n    });\n    return;\n  }\n  const markup = createMarcup(data);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMore.classList.add('hidden');\n}\n\nfunction chekBtnVisibleStatus() {\n  if (page === maxPage) {\n    hideLoadMoreBtn();\n    iziToast.show({\n      message: 'This are all photos',\n      color: 'blue',\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\n"],"names":["refs","userValue","page","maxPage","hideLoader","hideLoadMoreBtn","lightbox","SimpleLightbox","showLoader","data","searchImages","renderImages","rect","chekBtnVisibleStatus","error","BASE_URL","options","res","axios","err","iziToast","createMarcup","images","image","markup","showLoadMoreBtn"],"mappings":"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"}